@model ProjectForHealing.ViewModels.AddResourceViewModel

@{
    ViewData["Title"] = "View";
}
<div class="container middlebody">
    <h1>Create New Resource</h1>

    <div class="container" style="background-size:cover; border-radius:0px; background-image: url('Images/indexImage.png');">
        <form enctype="multipart/form-data" asp-controller="Resource" asp-action="Add" method="post">

            @*<div asp-validation-summary="All"></div>*@

            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="OrgName" class="control-label"></label>
                        <input asp-for="OrgName" class="form-control" />
                        <span asp-validation-for="OrgName" class="text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="OrgEmail" class="control-label"></label>
                        <input asp-for="OrgEmail" class="form-control" />
                        <span asp-validation-for="OrgEmail" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="OrgNumber" class="control-label"></label>
                        <input asp-for="OrgNumber" class="form-control" />
                        <span asp-validation-for="OrgNumber" class="text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="WebsiteUrl" class="control-label"></label>
                        <input asp-for="WebsiteUrl" class="form-control" />
                        <span asp-validation-for="WebsiteUrl" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-4">
                    <div class="form-group">
                        <label asp-for="OrgAddress" class="control-label"></label>
                        <input asp-for="OrgAddress" class="form-control" oninput="window.getCoordinates();" />
                        <span asp-validation-for="OrgAddress" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <label asp-for="OrgCity" class="control-label"></label>
                        <input asp-for="OrgCity" class="form-control" />
                        <span asp-validation-for="OrgCity" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-2">
                    <div class="form-group">
                        <label asp-for="OrgZip" class="control-label"></label>
                        <input asp-for="OrgZip" class="form-control" />
                        <span asp-validation-for="OrgZip" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-2">
                    <div class="form-group">
                        <label asp-for="OrgSte" class="control-label"></label>
                        <input asp-for="OrgSte" class="form-control" />
                        <span asp-validation-for="OrgSte" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="OrgDescription" class="control-label"></label>
                        <textarea asp-for="OrgDescription" class="form-control"> </textarea>
                        <span asp-validation-for="OrgDescription" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row mt-2">
                <div class="col-5">
                    <div class="form-group">
                        <label asp-for="UploadedFile" class="control-label">Would you like to submit an informational document? </label>
                        <div class="custom-file">
                            <input asp-for="UploadedFile" class="form-control custom-file-input">
                            <label class="custom-file-label border-primary-y">(pdf - flyer - brochure)</label>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row mt-3">
                <div class="col-9 border-top border-secondary">
                    <h4 class="mt-2">What type of services do you provide?(Maximum of Three)</h4>
                </div>
            </div>
            <style>

                input[type=checkbox]:checked {
                    background-color: blue;
                }
            </style>
            <div class="row mt-1">

                <div class="col form-group">

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="adult" name="ResourceTypes" value="adult" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="adult"> Adult Education</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="healthCare" name="ResourceTypes" value="affordable health Care" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="healthCare"> Affordable Healthcare</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="finance" name="ResourceTypes" value="aid" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="finance"> Financial & Material Aid</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="crisis" name="ResourceTypes" value="hotline" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="crisis"> Crisis Hotline</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="food" name="ResourceTypes" value="food" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="food"> Food & Meals</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="ethnic" name="ResourceTypes" value="ethnic" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="ethnic"> Ethnic Organization</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="housing" name="ResourceTypes" value="housing" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="housing"> Housing & Real Estate</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="legal" name="ResourceTypes" value="legal" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="legal"> Legal & Immigration Services</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="naturald" name="ResourceTypes" value="disasters" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="naturald">Natural Disasters</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="employment" name="ResourceTypes" value="employment" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="employment">Employment</label>
                    </div>


                </div>
                <div class="col">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="youth" name="ResourceTypes" value="children" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="youth">Youth & Child Education</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="mental" name="ResourceTypes" value="mental" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="mental">Mental Health & Substance Use</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="tax" name="ResourceTypes" value="tax" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="tax">Tax & Accounting</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="public" name="ResourceTypes" value="safety" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="public">Public Safety</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="transportation" name="ResourceTypes" value="transportation" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="transportation">Transportation</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="faith" name="ResourceTypes" value="religion" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="faith">Faith & Religion<br></label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="social" name="ResourceTypes" value="socialsecurity" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="social">Social Security</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="funeral" name="ResourceTypes" value="funeral" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="funeral">Funeral & Afterlife Services</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="translation" name="ResourceTypes" value="esol" onclick="return ValidateSelection();" />
                        <label class="custom-control-label" for="translation">Translation & Language Assistance</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="medical" name="ResourceTypes" value="medical" onclick="return ValidateSelection();">
                        <label class="custom-control-label" for="medical">Medical</label>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-9 border-top border-secondary">
                    <h4 class="mt-2">This is where tags will go</h4>
                </div>
            </div>
            <style>

                input[type=checkbox]:checked {
                    background-color: blue;
                }
            </style>
            <div class="row mt-1">
                <div class="col">
                    <div class="custom-control custom-checkbox">
                        <input asp-for="Tag1" type="checkbox" class="custom-control-input" id="Tag1" name="ResourceTypes" value="">
                        <label asp-for="Tag1" class="custom-control-label">Do you serve refugees within the first 5 years of resettlement?</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input asp-for="Tag2" type="checkbox" class="custom-control-input" id="Tag2" name="ResourceTypes" value="">
                        <label asp-for="Tag2" class="custom-control-label"> Do you serve LGBTQ+ populations? </label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input asp-for="Tag3" type="checkbox" class="custom-control-input" id="Tag3" name="ResourceTypes" value="">
                        <label asp-for="Tag3" class="custom-control-label"> Do you serve people with disabilities?	 </label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input asp-for="Tag4" type="checkbox" class="custom-control-input" id="Tag4" name="ResourceTypes" value="">
                        <label asp-for="Tag4" class="custom-control-label"> Do you serve undocumented immigrants?	 </label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input asp-for="Tag5" type="checkbox" class="custom-control-input" id="Tag5" name="ResourceTypes" value="">
                        <label asp-for="Tag5" class="custom-control-label"> Do you provide service in languages other than English?	 </label>
                    </div>
                </div>
            </div>

            @*<div class="form-group">

                @Html.CheckBoxFor(m => m.Tag1,
                         new
                         {
                           @class = "custom-control-input",
                           @id = "Tag1",
                         })
            <label asp-for="Tag1" class="control-label">Do you serve refugees within the first 5 years of resettlement?</label>

            @Html.RadioButtonFor(m => m.Tag1, true) Yes

            @Html.RadioButtonFor(m => m.Tag1, false) No
            <span asp-validation-for="Tag1" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Tag2" class="control-label">Do you serve LGBTQ+ populations?</label>

            @Html.RadioButtonFor(m => m.Tag2, true) Yes

            @Html.RadioButtonFor(m => m.Tag2, false) No
            <span asp-validation-for="Tag2" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Tag3" class="control-label">Do you serve people with disabilities? </label>

            @Html.RadioButtonFor(m => m.Tag3, true) Yes

            @Html.RadioButtonFor(m => m.Tag3, false) No
            <span asp-validation-for="Tag3" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Tag4" class="control-label">Do you serve undocumented immigrants? </label>

            @Html.RadioButtonFor(m => m.Tag4, true) Yes

            @Html.RadioButtonFor(m => m.Tag4, false) No
            <span asp-validation-for="Tag4" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Tag5" class="control-label">Do you provide service in languages other than English?</label>

            @Html.RadioButtonFor(m => m.Tag5, true) Yes

            @Html.RadioButtonFor(m => m.Tag5, false) No
            <span asp-validation-for="Tag5" class="text-danger"></span>
        </div>*@


            <div class="row mt-4">
                <div class="col-9 border-top border-secondary">
                    <p style="font-size: small;">
                        <br>
                        Neighborly was created and is run by WeaveTales to provide the most up-to-date, accurate, and reliable
                        information on local resources to newcomers and residents in need through an easy-to-use, online
                        platform. WeaveTales reserves the right, in our sole discretion, to change, modify, add or delete all
                        or portions of your or your entity’s information on Neighborly without any notice to protect the
                        integrity of the system. You acknowledge that the information you provide today is most recent and
                        accurate to the best of your knowledge and that you are not providing fabricated or false information
                        for the purpose of promoting you, your business or service. You understand that you or your business
                        entity may be contacted by WeaveTales for a request of certain information that can be used in their
                        regular evaluations of service providers registered registered with the system for quality control and
                        that you will provide the requested information to maintain Neighborly in its best condition and help
                        users find the right service providers for their needs.
                    <p>
                </div>
            </div>

            <div class="row mt-2">
                <div class="col-10">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="agreed" name="Agreed" value="Agreed" onclick="ValidateForm();">
                        <label class="custom-control-label" for="agreed">I have read and agree to the terms listed above.</label>
                    </div>
                </div>
            </div>

            <div class="row mt-4 mb-5">
                <div class="col">
                    <input type="submit" id="submit" value="Submit Form" class="btn btn-primary" disabled onclick="return window.getCoordinates();" />
                </div>
            </div>

            <div class="row" id="hiddens">
                <input asp-for="lat" type="hidden" class="form-control" readonly />
                <input asp-for="lng" type="hidden" class="form-control" readonly />
            </div>

            @section Scripts{
                <script type="text/javascript">
                    $(document).ready(function () {
                        //selecting html element with custom file input class
                        //changing text when file name changes
                        $('.custom-file-input').on("change", function () {
                            //  var fileName = $(this).val.().split("\\").pop();
                            var ext = $('input[type=file]').val().split('.').pop().toLowerCase();
                            if ($.inArray(ext, ['pdf', 'docx', 'doc', '.txt']) == -1) {
                                alert('File must be in pdf, doc or docx format!');
                                $('.custom-file-input').val(null);
                            } else {
                                var fileName = $('input[type=file]').val().split('\\').pop();
                                //  var fileName = $(this).val.().split("\\").pop();
                                $(this).next('.custom-file-label').html(fileName);
                            }

                        })



                    });

                    function initMap() {
                        // Google maps are now initialized.


                        geocoder = new google.maps.Geocoder();

                        window.getCoordinates = function () {
                            var address = document.getElementById('OrgAddress').value;
                            var coordinates;
                            geocoder.geocode({ 'address': address }, function (results, status) {
                                if (status == 'OK') {
                                    /* map.setCenter(results[0].geometry.location);
                                        var marker = new google.maps.Marker({
                                            map: map,
                                            position: results[0].geometry.location
                                        });*/
                                    coordinates = results[0].geometry.location;
                                    // [coords_obj.lat.Scopes.b, coords_obj.lat.Scopes.a];
                                    // console.log(coordinates.lat(), coordinates.lng());
                                    document.getElementById('lat').value = coordinates.lat();
                                    document.getElementById('lng').value = coordinates.lng();
                                } else {
                                    alert('Geocode location for resource was not successful for the following reason: ' + status + '       Please double check your resource Street Address, City & Zip Code ');
                                }
                            });
                        }

                    }
                    function ValidateSelection() {
                        var checkboxes = new Array(3);
                        checkboxes = document.getElementsByName("ResourceTypes");
                        var numberOfCheckedItems = 0;
                        for (var i = 0; i < checkboxes.length; i++) {
                            if (checkboxes[i].checked)
                                numberOfCheckedItems++;
                        }
                        if (numberOfCheckedItems > 3) {
                            alert("You can't select more than 3 Resources!");
                            return false;
                        }
                    }

                    function ValidateForm() {
                        if (document.getElementById("agreed").checked) {
                            document.getElementById("submit").disabled = false;
                        }
                        else {
                            document.getElementById("submit").disabled = true;
                        }
                    }

                </script>
                <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHRMZHAXLXAuowcxyVA_fHwxRDqaqjX8k&callback=initMap"
                        async defer></script>
            }
        </form>
    </div>
</div>


